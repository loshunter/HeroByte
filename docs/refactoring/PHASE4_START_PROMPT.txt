═══════════════════════════════════════════════════════════════════════════
COPY THIS PROMPT TO START PHASE 4 REFACTORING
═══════════════════════════════════════════════════════════════════════════

I'm continuing the DMMenu.tsx Phase 4 refactoring. Read the handoff document at /home/loshunter/HeroByte/docs/refactoring/DMMENU_PHASE4_HANDOFF.md to understand the current state.

Current status:
- DMMenu.tsx is at 1,022 LOC (down from 1,588)
- Phases 2-3 complete (entity editors and simple controls extracted)
- Branch: refactor/dm-menu/stateful-tabs

Phase 4 goal: Extract 3 complex map controls (~430 LOC reduction)
1. MapTransformControl (Priority 10, ~160 LOC)
2. StagingZoneControl (Priority 11, ~180 LOC)
3. GridAlignmentWizard (Priority 12, ~90 LOC)

IMPORTANT: Use agents effectively to minimize your context usage:
- Use Explore agent for code searches
- Use general-purpose agents to write tests (follow NPCEditor.test.tsx pattern)
- Use general-purpose agents to extract components
- Launch agents in parallel when possible (single message, multiple Task calls)

Follow the proven 4-step extraction pattern from Phases 2-3:
1. Write characterization tests (use agent)
2. Extract component file (use agent)
3. Update tests to import extracted component
4. Integrate into DMMenu.tsx and commit

Start with MapTransformControl (Priority 10). Use agents to write comprehensive characterization tests following the NPCEditor.test.tsx pattern, then extract the component.

═══════════════════════════════════════════════════════════════════════════
