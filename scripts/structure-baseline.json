
> herobyte@0.9.0-beta.1 lint:structure /home/loshunter/HeroByte
> node scripts/structure-report.mjs --limit 50 --threshold 350 --json

{
  "generatedAt": "2025-10-21T20:57:41.384Z",
  "threshold": 350,
  "includeTests": false,
  "files": [
    {
      "path": "apps/client/src/features/dm/components/DMMenu.tsx",
      "loc": 1589,
      "category": "client:dm",
      "flagged": true,
      "hint": "See docs/refactoring/REFACTOR_ROADMAP.md - 20 clusters identified, start with Phase 1 (CollapsibleSection, NPCEditor, PropEditor)",
      "roadmapRef": "DMMenu.tsx Phases 1-6",
      "sizeBytes": 59420
    },
    {
      "path": "apps/client/src/ui/MapBoard.tsx",
      "loc": 1035,
      "category": "client:ui",
      "flagged": true,
      "hint": "See docs/refactoring/REFACTOR_ROADMAP.md - 32 clusters identified, start with Phase 1 (pure utilities: MapBoardTypes, coordinateTransforms)",
      "roadmapRef": "MapBoard.tsx Phases 1-7",
      "sizeBytes": 32852
    },
    {
      "path": "apps/server/src/middleware/validation.ts",
      "loc": 903,
      "category": "server:middleware",
      "flagged": true,
      "hint": "Break validators into schema-specific modules (transformValidation.ts, drawingValidation.ts, etc.).",
      "roadmapRef": "",
      "sizeBytes": 31647
    },
    {
      "path": "apps/e2e/partial-erase.spec.ts",
      "loc": 764,
      "category": "other",
      "flagged": true,
      "hint": "Evaluate SRP boundaries and extract focused modules. See REFACTOR_PLAYBOOK.md.",
      "roadmapRef": "",
      "sizeBytes": 28016
    },
    {
      "path": "apps/server/src/ws/messageRouter.ts",
      "loc": 750,
      "category": "server:websocket",
      "flagged": true,
      "hint": "Modularize handlers per message type & connection lifecycle. Extract auth, heartbeat, and message routing.",
      "roadmapRef": "",
      "sizeBytes": 24888
    },
    {
      "path": "apps/server/src/domains/room/service.ts",
      "loc": 645,
      "category": "server:domains",
      "flagged": true,
      "hint": "Split domain orchestration vs persistence vs validation. Follow DDD boundaries.",
      "roadmapRef": "",
      "sizeBytes": 19989
    },
    {
      "path": "apps/client/src/ui/App.tsx",
      "loc": 633,
      "category": "client:ui",
      "flagged": true,
      "hint": "See docs/refactoring/REFACTOR_ROADMAP.md - 27 clusters identified, start with Phase 1 (quick wins: useLayoutMeasurement, useToolMode, etc.)",
      "roadmapRef": "App.tsx Phases 1-7",
      "sizeBytes": 19504
    },
    {
      "path": "apps/client/src/features/map/components/DrawingsLayer.tsx",
      "loc": 568,
      "category": "client:map",
      "flagged": true,
      "hint": "Separate camera, selection, and tool orchestration. Extract hooks first, then components.",
      "roadmapRef": "",
      "sizeBytes": 18492
    },
    {
      "path": "packages/shared/src/models.ts",
      "loc": 507,
      "category": "shared",
      "flagged": true,
      "hint": "Partition shared models into domain-specific slices (scene.ts, player.ts, token.ts, drawing.ts).",
      "roadmapRef": "",
      "sizeBytes": 10810
    },
    {
      "path": "apps/client/src/services/websocket.ts",
      "loc": 462,
      "category": "client:services",
      "flagged": true,
      "hint": "Evaluate SRP boundaries and extract focused modules. See REFACTOR_PLAYBOOK.md.",
      "roadmapRef": "",
      "sizeBytes": 13073
    },
    {
      "path": "packages/shared/src/index.ts",
      "loc": 450,
      "category": "shared",
      "flagged": true,
      "hint": "Partition shared models into domain-specific slices (scene.ts, player.ts, token.ts, drawing.ts).",
      "roadmapRef": "",
      "sizeBytes": 15937
    },
    {
      "path": "apps/e2e/comprehensive-mvp.spec.ts",
      "loc": 443,
      "category": "other",
      "flagged": true,
      "hint": "Evaluate SRP boundaries and extract focused modules. See REFACTOR_PLAYBOOK.md.",
      "roadmapRef": "",
      "sizeBytes": 14555
    },
    {
      "path": "apps/e2e/session-load.spec.ts",
      "loc": 434,
      "category": "other",
      "flagged": true,
      "hint": "Evaluate SRP boundaries and extract focused modules. See REFACTOR_PLAYBOOK.md.",
      "roadmapRef": "",
      "sizeBytes": 12281
    },
    {
      "path": "apps/e2e/transform-tool.spec.ts",
      "loc": 432,
      "category": "other",
      "flagged": true,
      "hint": "Evaluate SRP boundaries and extract focused modules. See REFACTOR_PLAYBOOK.md.",
      "roadmapRef": "",
      "sizeBytes": 13276
    },
    {
      "path": "apps/server/src/ws/connectionHandler.ts",
      "loc": 432,
      "category": "server:websocket",
      "flagged": true,
      "hint": "Modularize handlers per message type & connection lifecycle. Extract auth, heartbeat, and message routing.",
      "roadmapRef": "",
      "sizeBytes": 14213
    },
    {
      "path": "apps/client/src/features/map/components/TokensLayer.tsx",
      "loc": 417,
      "category": "client:map",
      "flagged": true,
      "hint": "Separate camera, selection, and tool orchestration. Extract hooks first, then components.",
      "roadmapRef": "",
      "sizeBytes": 13349
    },
    {
      "path": "apps/client/src/hooks/usePlayerActions.ts",
      "loc": 408,
      "category": "client:hooks",
      "flagged": true,
      "hint": "Divide hook responsibilities per tool/state segment. Each hook should have ONE purpose (SRP).",
      "roadmapRef": "",
      "sizeBytes": 10994
    },
    {
      "path": "apps/client/src/components/layout/EntitiesPanel.tsx",
      "loc": 403,
      "category": "client:misc",
      "flagged": true,
      "hint": "Evaluate SRP boundaries and extract focused modules. See REFACTOR_PLAYBOOK.md.",
      "roadmapRef": "",
      "sizeBytes": 15182
    },
    {
      "path": "apps/e2e/staging-zone.spec.ts",
      "loc": 403,
      "category": "other",
      "flagged": true,
      "hint": "Evaluate SRP boundaries and extract focused modules. See REFACTOR_PLAYBOOK.md.",
      "roadmapRef": "",
      "sizeBytes": 12756
    },
    {
      "path": "apps/server/src/domains/map/service.ts",
      "loc": 388,
      "category": "server:domains",
      "flagged": true,
      "hint": "Split domain orchestration vs persistence vs validation. Follow DDD boundaries.",
      "roadmapRef": "",
      "sizeBytes": 11108
    },
    {
      "path": "apps/e2e/multi-client-sync.spec.ts",
      "loc": 378,
      "category": "other",
      "flagged": true,
      "hint": "Evaluate SRP boundaries and extract focused modules. See REFACTOR_PLAYBOOK.md.",
      "roadmapRef": "",
      "sizeBytes": 13129
    },
    {
      "path": "apps/client/src/layouts/props/MainLayoutProps.ts",
      "loc": 377,
      "category": "client:misc",
      "flagged": true,
      "hint": "Evaluate SRP boundaries and extract focused modules. See REFACTOR_PLAYBOOK.md.",
      "roadmapRef": "",
      "sizeBytes": 14906
    },
    {
      "path": "apps/client/src/features/players/components/PlayerSettingsMenu.tsx",
      "loc": 365,
      "category": "client:players",
      "flagged": true,
      "hint": "Evaluate SRP boundaries and extract focused modules. See REFACTOR_PLAYBOOK.md.",
      "roadmapRef": "",
      "sizeBytes": 12535
    },
    {
      "path": "apps/client/src/layouts/MainLayout.tsx",
      "loc": 365,
      "category": "client:misc",
      "flagged": true,
      "hint": "Evaluate SRP boundaries and extract focused modules. See REFACTOR_PLAYBOOK.md.",
      "roadmapRef": "",
      "sizeBytes": 10875
    },
    {
      "path": "apps/client/src/features/players/components/PlayerCard.tsx",
      "loc": 339,
      "category": "client:players",
      "flagged": false,
      "hint": "",
      "roadmapRef": "",
      "sizeBytes": 11198
    },
    {
      "path": "apps/client/src/features/drawing/utils/splitFreehandDrawing.ts",
      "loc": 337,
      "category": "client:misc",
      "flagged": false,
      "hint": "",
      "roadmapRef": "",
      "sizeBytes": 8769
    },
    {
      "path": "apps/client/src/utils/playerPersistence.ts",
      "loc": 334,
      "category": "client:misc",
      "flagged": false,
      "hint": "",
      "roadmapRef": "",
      "sizeBytes": 9945
    },
    {
      "path": "apps/client/src/features/selection/SelectionManager.ts",
      "loc": 330,
      "category": "client:misc",
      "flagged": false,
      "hint": "",
      "roadmapRef": "",
      "sizeBytes": 9746
    },
    {
      "path": "apps/client/src/features/auth/AuthenticationGate.tsx",
      "loc": 323,
      "category": "client:misc",
      "flagged": false,
      "hint": "",
      "roadmapRef": "",
      "sizeBytes": 9118
    },
    {
      "path": "apps/client/src/features/map/useMapAlignment.ts",
      "loc": 320,
      "category": "client:map",
      "flagged": false,
      "hint": "",
      "roadmapRef": "",
      "sizeBytes": 9508
    },
    {
      "path": "apps/client/src/features/map/components/TransformGizmo.tsx",
      "loc": 313,
      "category": "client:map",
      "flagged": false,
      "hint": "",
      "roadmapRef": "",
      "sizeBytes": 9336
    },
    {
      "path": "apps/client/src/layouts/BottomPanelLayout.tsx",
      "loc": 310,
      "category": "client:misc",
      "flagged": false,
      "hint": "",
      "roadmapRef": "",
      "sizeBytes": 10094
    },
    {
      "path": "apps/e2e/player-state.spec.ts",
      "loc": 307,
      "category": "other",
      "flagged": false,
      "hint": "",
      "roadmapRef": "",
      "sizeBytes": 10269
    },
    {
      "path": "apps/client/src/layouts/FloatingPanelsLayout.tsx",
      "loc": 306,
      "category": "client:misc",
      "flagged": false,
      "hint": "",
      "roadmapRef": "",
      "sizeBytes": 9803
    },
    {
      "path": "apps/e2e/ui-state.spec.ts",
      "loc": 298,
      "category": "other",
      "flagged": false,
      "hint": "",
      "roadmapRef": "",
      "sizeBytes": 9456
    },
    {
      "path": "apps/e2e/undo-redo.spec.ts",
      "loc": 291,
      "category": "other",
      "flagged": false,
      "hint": "",
      "roadmapRef": "",
      "sizeBytes": 9354
    },
    {
      "path": "apps/client/src/features/drawing/components/DrawingToolbar.tsx",
      "loc": 280,
      "category": "client:misc",
      "flagged": false,
      "hint": "",
      "roadmapRef": "",
      "sizeBytes": 8823
    },
    {
      "path": "apps/client/src/hooks/useKeyboardShortcuts.ts",
      "loc": 278,
      "category": "client:hooks",
      "flagged": false,
      "hint": "",
      "roadmapRef": "",
      "sizeBytes": 7821
    },
    {
      "path": "apps/client/src/hooks/useDrawingStateManager.ts",
      "loc": 277,
      "category": "client:hooks",
      "flagged": false,
      "hint": "",
      "roadmapRef": "",
      "sizeBytes": 6617
    },
    {
      "path": "apps/e2e/character-creation.spec.ts",
      "loc": 275,
      "category": "other",
      "flagged": false,
      "hint": "",
      "roadmapRef": "",
      "sizeBytes": 8445
    },
    {
      "path": "apps/client/src/components/dice/DiceToken.tsx",
      "loc": 264,
      "category": "client:dice",
      "flagged": false,
      "hint": "",
      "roadmapRef": "",
      "sizeBytes": 7598
    },
    {
      "path": "apps/e2e/multi-select.spec.ts",
      "loc": 262,
      "category": "other",
      "flagged": false,
      "hint": "",
      "roadmapRef": "",
      "sizeBytes": 8208
    },
    {
      "path": "apps/server/src/domains/auth/service.ts",
      "loc": 251,
      "category": "server:domains",
      "flagged": false,
      "hint": "",
      "roadmapRef": "",
      "sizeBytes": 7093
    },
    {
      "path": "apps/client/src/features/session/useSessionManagement.ts",
      "loc": 249,
      "category": "client:misc",
      "flagged": false,
      "hint": "",
      "roadmapRef": "",
      "sizeBytes": 7621
    },
    {
      "path": "apps/client/src/features/map/components/PointersLayer.tsx",
      "loc": 247,
      "category": "client:map",
      "flagged": false,
      "hint": "",
      "roadmapRef": "",
      "sizeBytes": 7865
    },
    {
      "path": "apps/client/src/components/dice/ResultPanel.tsx",
      "loc": 242,
      "category": "client:dice",
      "flagged": false,
      "hint": "",
      "roadmapRef": "",
      "sizeBytes": 6775
    },
    {
      "path": "apps/client/src/layouts/CenterCanvasLayout.tsx",
      "loc": 242,
      "category": "client:misc",
      "flagged": false,
      "hint": "",
      "roadmapRef": "",
      "sizeBytes": 7923
    },
    {
      "path": "apps/client/src/features/drawing/utils/partialErase.ts",
      "loc": 241,
      "category": "client:misc",
      "flagged": false,
      "hint": "",
      "roadmapRef": "",
      "sizeBytes": 5758
    },
    {
      "path": "apps/client/src/hooks/useDrawingTool.ts",
      "loc": 241,
      "category": "client:hooks",
      "flagged": false,
      "hint": "",
      "roadmapRef": "",
      "sizeBytes": 6960
    },
    {
      "path": "apps/e2e/staging-zone-visual.spec.ts",
      "loc": 241,
      "category": "other",
      "flagged": false,
      "hint": "",
      "roadmapRef": "",
      "sizeBytes": 7547
    }
  ]
}
