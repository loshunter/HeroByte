{
  "generatedAt": "2025-11-26T20:05:53.614Z",
  "threshold": 350,
  "includeTests": false,
  "files": [
    {
      "path": "apps/server/src/ws/messageRouter.ts",
      "loc": 1012,
      "category": "server:websocket",
      "flagged": true,
      "hint": "Modularize handlers per message type & connection lifecycle. Extract auth, heartbeat, and message routing.",
      "roadmapRef": "",
      "sizeBytes": 33140
    },
    {
      "path": "apps/e2e/partial-erase.spec.ts",
      "loc": 785,
      "category": "other",
      "flagged": true,
      "hint": "Evaluate SRP boundaries and extract focused modules. See REFACTOR_PLAYBOOK.md.",
      "roadmapRef": "",
      "sizeBytes": 28824
    },
    {
      "path": "apps/client/src/ui/App.tsx",
      "loc": 713,
      "category": "client:ui",
      "flagged": true,
      "hint": "See docs/refactoring/REFACTOR_ROADMAP.md - 27 clusters identified, start with Phase 1 (quick wins: useLayoutMeasurement, useToolMode, etc.)",
      "roadmapRef": "App.tsx Phases 1-7",
      "sizeBytes": 22566
    },
    {
      "path": "apps/client/src/components/layout/EntitiesPanel.tsx",
      "loc": 712,
      "category": "client:misc",
      "flagged": true,
      "hint": "Evaluate SRP boundaries and extract focused modules. See REFACTOR_PLAYBOOK.md.",
      "roadmapRef": "",
      "sizeBytes": 29933
    },
    {
      "path": "apps/client/src/features/map/components/TokensLayer.tsx",
      "loc": 658,
      "category": "client:map",
      "flagged": true,
      "hint": "Separate camera, selection, and tool orchestration. Extract hooks first, then components.",
      "roadmapRef": "",
      "sizeBytes": 20160
    },
    {
      "path": "packages/shared/src/models.ts",
      "loc": 599,
      "category": "shared",
      "flagged": true,
      "hint": "Partition shared models into domain-specific slices (scene.ts, player.ts, token.ts, drawing.ts).",
      "roadmapRef": "",
      "sizeBytes": 13199
    },
    {
      "path": "apps/client/src/services/websocket.ts",
      "loc": 580,
      "category": "client:services",
      "flagged": true,
      "hint": "Evaluate SRP boundaries and extract focused modules. See REFACTOR_PLAYBOOK.md.",
      "roadmapRef": "",
      "sizeBytes": 20959
    },
    {
      "path": "apps/client/src/features/map/components/DrawingsLayer.tsx",
      "loc": 564,
      "category": "client:map",
      "flagged": true,
      "hint": "Separate camera, selection, and tool orchestration. Extract hooks first, then components.",
      "roadmapRef": "",
      "sizeBytes": 18214
    },
    {
      "path": "apps/client/src/ui/MapBoard.tsx",
      "loc": 562,
      "category": "client:ui",
      "flagged": true,
      "hint": "See docs/refactoring/REFACTOR_ROADMAP.md - 32 clusters identified, start with Phase 1 (pure utilities: MapBoardTypes, coordinateTransforms)",
      "roadmapRef": "MapBoard.tsx Phases 1-7",
      "sizeBytes": 16582
    },
    {
      "path": "packages/shared/src/index.ts",
      "loc": 544,
      "category": "shared",
      "flagged": true,
      "hint": "Partition shared models into domain-specific slices (scene.ts, player.ts, token.ts, drawing.ts).",
      "roadmapRef": "",
      "sizeBytes": 19854
    },
    {
      "path": "apps/client/src/hooks/usePlayerActions.ts",
      "loc": 500,
      "category": "client:hooks",
      "flagged": true,
      "hint": "Divide hook responsibilities per tool/state segment. Each hook should have ONE purpose (SRP).",
      "roadmapRef": "",
      "sizeBytes": 14485
    },
    {
      "path": "apps/client/src/features/players/components/PlayerSettingsMenu.tsx",
      "loc": 499,
      "category": "client:players",
      "flagged": true,
      "hint": "Evaluate SRP boundaries and extract focused modules. See REFACTOR_PLAYBOOK.md.",
      "roadmapRef": "",
      "sizeBytes": 17389
    },
    {
      "path": "apps/client/src/services/websocket/ConnectionLifecycleManager.ts",
      "loc": 499,
      "category": "client:services",
      "flagged": true,
      "hint": "Evaluate SRP boundaries and extract focused modules. See REFACTOR_PLAYBOOK.md.",
      "roadmapRef": "",
      "sizeBytes": 15487
    },
    {
      "path": "apps/client/src/services/websocket/MessageRouter.ts",
      "loc": 460,
      "category": "client:services",
      "flagged": true,
      "hint": "Evaluate SRP boundaries and extract focused modules. See REFACTOR_PLAYBOOK.md.",
      "roadmapRef": "",
      "sizeBytes": 13808
    },
    {
      "path": "apps/e2e/session-load.spec.ts",
      "loc": 449,
      "category": "other",
      "flagged": true,
      "hint": "Evaluate SRP boundaries and extract focused modules. See REFACTOR_PLAYBOOK.md.",
      "roadmapRef": "",
      "sizeBytes": 12964
    },
    {
      "path": "apps/e2e/transform-tool.spec.ts",
      "loc": 448,
      "category": "other",
      "flagged": true,
      "hint": "Evaluate SRP boundaries and extract focused modules. See REFACTOR_PLAYBOOK.md.",
      "roadmapRef": "",
      "sizeBytes": 14039
    },
    {
      "path": "apps/e2e/comprehensive-mvp.spec.ts",
      "loc": 443,
      "category": "other",
      "flagged": true,
      "hint": "Evaluate SRP boundaries and extract focused modules. See REFACTOR_PLAYBOOK.md.",
      "roadmapRef": "",
      "sizeBytes": 14555
    },
    {
      "path": "apps/e2e/staging-zone.spec.ts",
      "loc": 423,
      "category": "other",
      "flagged": true,
      "hint": "Evaluate SRP boundaries and extract focused modules. See REFACTOR_PLAYBOOK.md.",
      "roadmapRef": "",
      "sizeBytes": 13797
    },
    {
      "path": "apps/client/src/layouts/MainLayout.tsx",
      "loc": 395,
      "category": "client:misc",
      "flagged": true,
      "hint": "Evaluate SRP boundaries and extract focused modules. See REFACTOR_PLAYBOOK.md.",
      "roadmapRef": "",
      "sizeBytes": 12093
    },
    {
      "path": "apps/e2e/npc-visibility.spec.ts",
      "loc": 391,
      "category": "other",
      "flagged": true,
      "hint": "Evaluate SRP boundaries and extract focused modules. See REFACTOR_PLAYBOOK.md.",
      "roadmapRef": "",
      "sizeBytes": 12458
    },
    {
      "path": "apps/server/src/domains/map/service.ts",
      "loc": 390,
      "category": "server:domains",
      "flagged": true,
      "hint": "Split domain orchestration vs persistence vs validation. Follow DDD boundaries.",
      "roadmapRef": "",
      "sizeBytes": 11210
    },
    {
      "path": "apps/client/src/layouts/BottomPanelLayout.tsx",
      "loc": 389,
      "category": "client:misc",
      "flagged": true,
      "hint": "Evaluate SRP boundaries and extract focused modules. See REFACTOR_PLAYBOOK.md.",
      "roadmapRef": "",
      "sizeBytes": 13308
    },
    {
      "path": "apps/e2e/multi-client-sync.spec.ts",
      "loc": 378,
      "category": "other",
      "flagged": true,
      "hint": "Evaluate SRP boundaries and extract focused modules. See REFACTOR_PLAYBOOK.md.",
      "roadmapRef": "",
      "sizeBytes": 13129
    },
    {
      "path": "apps/server/src/domains/character/service.ts",
      "loc": 377,
      "category": "server:domains",
      "flagged": true,
      "hint": "Split domain orchestration vs persistence vs validation. Follow DDD boundaries.",
      "roadmapRef": "",
      "sizeBytes": 10926
    },
    {
      "path": "apps/e2e/player-npc-initiative.spec.ts",
      "loc": 370,
      "category": "other",
      "flagged": true,
      "hint": "Evaluate SRP boundaries and extract focused modules. See REFACTOR_PLAYBOOK.md.",
      "roadmapRef": "",
      "sizeBytes": 12685
    },
    {
      "path": "apps/client/src/features/dm/components/NPCEditor.tsx",
      "loc": 366,
      "category": "client:dm",
      "flagged": true,
      "hint": "Split DM menu into feature panels & shared hooks. See REFACTOR_PLAYBOOK.md Pattern 2.",
      "roadmapRef": "",
      "sizeBytes": 12420
    },
    {
      "path": "apps/client/src/features/players/components/PlayerCard.tsx",
      "loc": 365,
      "category": "client:players",
      "flagged": true,
      "hint": "Evaluate SRP boundaries and extract focused modules. See REFACTOR_PLAYBOOK.md.",
      "roadmapRef": "",
      "sizeBytes": 12400
    },
    {
      "path": "apps/client/src/layouts/props/MainLayoutProps.ts",
      "loc": 359,
      "category": "client:misc",
      "flagged": true,
      "hint": "Evaluate SRP boundaries and extract focused modules. See REFACTOR_PLAYBOOK.md.",
      "roadmapRef": "",
      "sizeBytes": 14522
    },
    {
      "path": "apps/client/src/services/websocket/MessageQueueManager.ts",
      "loc": 354,
      "category": "client:services",
      "flagged": true,
      "hint": "Evaluate SRP boundaries and extract focused modules. See REFACTOR_PLAYBOOK.md.",
      "roadmapRef": "",
      "sizeBytes": 10989
    },
    {
      "path": "apps/client/src/features/dm/components/DMMenu.tsx",
      "loc": 349,
      "category": "client:dm",
      "flagged": false,
      "hint": "",
      "roadmapRef": "",
      "sizeBytes": 11635
    },
    {
      "path": "apps/client/src/utils/playerPersistence.ts",
      "loc": 343,
      "category": "client:misc",
      "flagged": false,
      "hint": "",
      "roadmapRef": "",
      "sizeBytes": 10283
    },
    {
      "path": "apps/client/src/features/dm/components/map-controls/StagingZoneControl.tsx",
      "loc": 339,
      "category": "client:dm",
      "flagged": false,
      "hint": "",
      "roadmapRef": "",
      "sizeBytes": 12328
    },
    {
      "path": "apps/client/src/features/drawing/utils/splitFreehandDrawing.ts",
      "loc": 337,
      "category": "client:misc",
      "flagged": false,
      "hint": "",
      "roadmapRef": "",
      "sizeBytes": 8769
    },
    {
      "path": "apps/client/src/features/players/components/PortraitSection.tsx",
      "loc": 334,
      "category": "client:players",
      "flagged": false,
      "hint": "",
      "roadmapRef": "",
      "sizeBytes": 10815
    },
    {
      "path": "apps/client/src/features/selection/SelectionManager.ts",
      "loc": 330,
      "category": "client:misc",
      "flagged": false,
      "hint": "",
      "roadmapRef": "",
      "sizeBytes": 9746
    },
    {
      "path": "apps/server/src/ws/auth/AuthenticationHandler.ts",
      "loc": 329,
      "category": "server:websocket",
      "flagged": false,
      "hint": "",
      "roadmapRef": "",
      "sizeBytes": 10874
    },
    {
      "path": "apps/client/src/features/players/components/NpcCard.tsx",
      "loc": 328,
      "category": "client:players",
      "flagged": false,
      "hint": "",
      "roadmapRef": "",
      "sizeBytes": 10486
    },
    {
      "path": "apps/e2e/character-creation.spec.ts",
      "loc": 328,
      "category": "other",
      "flagged": false,
      "hint": "",
      "roadmapRef": "",
      "sizeBytes": 11071
    },
    {
      "path": "apps/client/src/features/auth/AuthenticationGate.tsx",
      "loc": 323,
      "category": "client:misc",
      "flagged": false,
      "hint": "",
      "roadmapRef": "",
      "sizeBytes": 9118
    },
    {
      "path": "apps/client/src/features/map/useMapAlignment.ts",
      "loc": 320,
      "category": "client:map",
      "flagged": false,
      "hint": "",
      "roadmapRef": "",
      "sizeBytes": 9508
    },
    {
      "path": "apps/client/src/components/dice/RollLog.tsx",
      "loc": 318,
      "category": "client:dice",
      "flagged": false,
      "hint": "",
      "roadmapRef": "",
      "sizeBytes": 9640
    },
    {
      "path": "apps/server/src/ws/handlers/TokenMessageHandler.ts",
      "loc": 314,
      "category": "server:websocket",
      "flagged": false,
      "hint": "",
      "roadmapRef": "",
      "sizeBytes": 9045
    },
    {
      "path": "apps/client/src/features/map/components/TransformGizmo.tsx",
      "loc": 313,
      "category": "client:map",
      "flagged": false,
      "hint": "",
      "roadmapRef": "",
      "sizeBytes": 9336
    },
    {
      "path": "apps/client/src/test-utils/SnapshotBuilder.ts",
      "loc": 308,
      "category": "client:misc",
      "flagged": false,
      "hint": "",
      "roadmapRef": "",
      "sizeBytes": 7537
    },
    {
      "path": "apps/e2e/player-state.spec.ts",
      "loc": 307,
      "category": "other",
      "flagged": false,
      "hint": "",
      "roadmapRef": "",
      "sizeBytes": 10269
    },
    {
      "path": "apps/server/src/domains/room/transform/TransformHandler.ts",
      "loc": 304,
      "category": "server:domains",
      "flagged": false,
      "hint": "",
      "roadmapRef": "",
      "sizeBytes": 8690
    },
    {
      "path": "apps/client/src/hooks/useKeyboardShortcuts.ts",
      "loc": 302,
      "category": "client:hooks",
      "flagged": false,
      "hint": "",
      "roadmapRef": "",
      "sizeBytes": 8567
    },
    {
      "path": "apps/server/src/ws/handlers/CharacterMessageHandler.ts",
      "loc": 299,
      "category": "server:websocket",
      "flagged": false,
      "hint": "",
      "roadmapRef": "",
      "sizeBytes": 9578
    },
    {
      "path": "apps/e2e/ui-state.spec.ts",
      "loc": 298,
      "category": "other",
      "flagged": false,
      "hint": "",
      "roadmapRef": "",
      "sizeBytes": 9456
    },
    {
      "path": "apps/client/src/features/dm/hooks/useDMContext.ts",
      "loc": 294,
      "category": "client:dm",
      "flagged": false,
      "hint": "",
      "roadmapRef": "",
      "sizeBytes": 7411
    }
  ]
}
